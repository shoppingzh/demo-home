import{u as g,d as x}from"./file.c124e0ab.js";import{_ as k,h as s,i as v,o as w,c as p,a as c,t as C,k as B,l as R}from"./index.364835fe.js";const j={class:"capture-wrap"},S={class:"tw-mb-5 tw-text-center tw-text-lg tw-font-bold"},T={class:"video-wrap tw-relative tw-bg-black tw-rounded-full tw-overflow-hidden"},U={__name:"index",setup(z){const{stream:r,active:f,start:_,stop:E}=g({video:!0,audio:!1}),n=s(null),l=s(0),u=s(!1),o=s(null),i=s(null);let a=null;v([n,r],([e,t])=>{!e||!t||(n.value.srcObject=r.value)});const m=async()=>{l.value=1;try{await _();const e=[];a=new MediaRecorder(r.value),a.ondataavailable=t=>{e.push(t.data)},a.onstop=()=>{const t=new Blob(e,{type:"video/mp4"}),y=URL.createObjectURL(t);x(y,"\u4EBA\u8138\u5F55\u5236\u7ED3\u679C.mp4")},a.start()}catch(e){console.error(e)}},d=()=>{u.value=!1,l.value=2,o.value="\u7728\u7728\u773C",setTimeout(()=>{b()},2e3)},b=()=>{l.value=3,o.value="\u5C4F\u5E55\u5373\u5C06\u95EA\u70C1";const e=["#f5222d","#1890ff","#eb2f96","#52c41a","#faad14","#13c2c2"],t=()=>{i.value=e.shift(),i.value?setTimeout(()=>{t()},350):h()};t()},h=()=>{l.value=4,o.value="\u5F55\u5236\u7ED3\u675F",a&&a.stop()};return m(),v(f,e=>{e&&(u.value=!0)}),(e,t)=>(w(),p("div",{class:"tw-p-3 tw-w-full tw-h-full tw-bg-white",style:R({"background-color":i.value})},[c("div",j,[c("div",S,C(o.value),1),c("div",T,[c("video",{ref_key:"video",ref:n,muted:"",autoplay:"",playsinline:"","webkit-playsinline":"",onPlay:d},null,544),u.value?(w(),p("div",{key:0,class:"tw-absolute tw-left-0 tw-top-0 tw-z-10 tw-w-full tw-h-full tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-50",onClick:d}," \u70B9\u51FB\u6B64\u5904\u5F00\u59CB\u5427 ")):B("",!0)])])],4))}};var N=k(U,[["__scopeId","data-v-2d492ddb"]]);export{N as default};
